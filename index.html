<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thonsee Health - Accueil</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="compte.js"></script>
  <script defer src="panier.js"></script>
  <script defer src="utilisateur.js"></script>
  <script defer src="commandes.js"></script>
</head>

<body>

<header class="tete">
  <!-- Icône utilisateur -->
  <div class="user" onclick="toggleAccountsPopup()" style="cursor:pointer;">
    <a class="text-decoration" href="parametre.html">
      <div id="userIcon">👤</div>
    </a>
  </div>

  <div class="logo">Thonsee <span>Health</span></div>

  <!-- Bouton menu burger pour mobile -->
  <div class="menu-toggle" onclick="toggleMobileMenu()">☰</div>

  <!-- Menu principal -->
  <nav class="menu" id="mainMenu">
    <a href="index.html">Accueil</a>
    <a href="produits.html">Nos Produits</a>
    <a href="contact.html">Contact</a>
    <a href="panier.html">Panier <span id="cartCountNav">0</span></a>
    <a href="#" onclick="toggleLoginPopup(); return false;">Se connecter</a>
    <a href="#" onclick="toggleRegisterPopup(); return false;">S'inscrire</a>

    <!-- Lien vers la page Admin Commande -->
    <a href="admin_commande.html" id="adminLink" style="display: none; color: gold;">Admin Commande</a>

    <!-- Lien vers la page Admin Utilisateurs -->
    <a href="admin_users.html" id="adminUsersLink" style="display: none; color: gold;">Admin Utilisateurs</a>
  </nav>
</header>


  <main>
    <!-- Section Accueil -->
    <section id="accueil" class="slogan">
      <h1 class="titre">Élevez votre bien-être au rang du luxe.</h1>
      <p class="slogan1">Compléments alimentaires premium – Naturels, efficaces, élégants.</p>
    </section>

    <!-- Section Blog -->
    <section id="blog" class="section">
      <h2>Blog Santé & Bien-être</h2>
      <p>
        Bienvenue sur notre blog dédié au bien-être et à la santé naturelle. Ici, nous partageons des conseils approfondis,
        des recettes naturelles et des astuces pour améliorer votre qualité de vie au quotidien. Chaque article est
        rédigé avec soin pour vous accompagner dans votre quête d’équilibre et de vitalité.
      </p>
      <p>
        L’importance d’une alimentation saine, les vertus des plantes médicinales, ou encore les dernières recherches en
        nutrition sont autant de sujets que nous abordons régulièrement. Nous croyons fermement que la santé passe par
        une approche globale mêlant science et respect de la nature.
      </p>
      <p>
        N’hésitez pas à parcourir nos articles pour découvrir comment intégrer facilement ces conseils dans votre routine,
        et vivre pleinement votre potentiel au naturel.
      </p>
      <p>
        En plus, nous mettons à disposition des guides pratiques pour choisir les meilleurs compléments alimentaires,
        comprendre leurs effets, et éviter les idées reçues. Votre bien-être est notre priorité, et notre blog est là pour
        vous éclairer sur chaque étape de votre parcours.
      </p>
    </section>

    <!-- Section Témoignages -->
    <section id="temoignages" class="section">
      <h2>Témoignages</h2>
      <p>
        « Depuis que j’utilise les compléments Thonsee Health, j’ai ressenti un regain d’énergie incroyable. Leur qualité est
        irréprochable et le service client est toujours à l’écoute. » – Marie L.
      </p>
      <p>
        « Des produits d’une pureté exceptionnelle, alliant efficacité et plaisir d’utilisation. Je recommande vivement à
        tous ceux qui veulent prendre soin d’eux naturellement. » – Julien P.
      </p>
      <p>
        « Ce que j’apprécie le plus, c’est la transparence de la marque. On sait exactement ce qu’on ingère, et ça fait
        toute la différence dans ma confiance et ma fidélité. » – Sophie M.
      </p>
      <p>
        « Grâce à Thonsee Health, j’ai réussi à améliorer ma digestion et mon sommeil sans effets secondaires. Une vraie
        révélation ! » – Ahmed K.
      </p>
    </section>

    <!-- Section Science -->
    <section id="science" class="section">
      <h2>La Science derrière Thonsee Health</h2>
      <p>
        Chez Thonsee Health, la recherche scientifique est au cœur de nos développements. Chaque ingrédient est sélectionné
        selon des critères rigoureux basés sur des études cliniques et des preuves scientifiques solides.
      </p>
      <p>
        Notre équipe collabore avec des experts en nutrition, biologie et pharmacologie pour formuler des compléments
        qui optimisent votre santé sans compromis. Nous testons également la biodisponibilité de chaque substance afin
        d'assurer une absorption maximale.
      </p>
      <p>
        La transparence est primordiale : toutes nos formules sont documentées et soumises à des contrôles qualité
        stricts. Nous évitons les additifs superflus, privilégions les sources naturelles et traçons chaque lot de
        production.
      </p>
      <p>
        Cette approche scientifique et responsable garantit des produits haut de gamme, efficaces et sûrs, qui répondent
        aux attentes des consommateurs exigeants et soucieux de leur santé.
      </p>
    </section>

    <!-- Section À propos -->
    <section id="apropos" class="section">
      <h2>À propos de Thonsee Health</h2>
      <p>
        Thonsee Health est née d’une passion commune pour la santé naturelle et le luxe discret. Notre mission est de
        proposer des compléments alimentaires d’exception, qui allient pureté, efficacité et esthétique.
      </p>
      <p>
        Fondée par une équipe de spécialistes engagés, la marque s’appuie sur des valeurs fortes : respect de l’environnement,
        transparence totale, et quête d’innovation. Chaque produit est le fruit d’un travail rigoureux pour vous offrir
        une expérience unique.
      </p>
      <p>
        Nous croyons en une approche holistique du bien-être, où science et nature cohabitent harmonieusement pour
        révéler le meilleur de vous-même. Rejoignez-nous dans cette aventure vers une santé plus belle, plus saine,
        plus luxueuse.
      </p>
      <p>
        Merci de faire confiance à Thonsee Health.
      </p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Thonsee Health. Tous droits réservés.</p>
  </footer>

  <!-- Popup d'édition (ADMIN) -->
  <div id="editPopup" class="popup hidden">
    <div class="popup-content">
      <h2>Modifier le contenu</h2>
      <textarea id="editTextarea" rows="6" style="width: 100%;"></textarea>
      <button onclick="saveEditedText()">Enregistrer</button>
      <button onclick="closeEditPopup()">Annuler</button>
    </div>
  </div>

  <!-- POPUP CONNEXION -->
  <div id="loginPopup" class="popup hidden">
    <form id="loginForm" class="popup-content">
      <h2>Connexion</h2>
      <input type="email" id="loginUsername" placeholder="Email" required />
      <input type="password" id="loginPassword" placeholder="Mot de passe" required />
      <p id="loginMessage" class="message"></p>
      <button type="submit">Se connecter</button>
      <button type="button" onclick="toggleLoginPopup()">Fermer</button>
    </form>
  </div>

  <!-- POPUP INSCRIPTION -->
  <div id="registerPopup" class="popup hidden">
    <form id="registerForm" class="popup-content">
      <h2>Inscription</h2>
      <input type="email" id="registerUsername" placeholder="Email" required />
      <input type="password" id="registerPassword" placeholder="Mot de passe" required />
      <p id="registerMessage" class="message"></p>
      <button type="submit">S’inscrire</button>
      <button type="button" onclick="toggleRegisterPopup()">Fermer</button>
    </form>
  </div>


<!-- Script gestion édition du contenu (admin only) -->
<script>
  const adminEmail = "athonseehealth@gmail.com";
  const currentUser = JSON.parse(localStorage.getItem("connectedUser"));
  const admins = [adminEmail];
  const isAdmin = currentUser && admins.includes(currentUser.email);

  if (isAdmin) {
    // Affiche les liens admin
    document.getElementById("adminLink").style.display = "inline-block";
    document.getElementById("adminUsersLink").style.display = "inline-block";

    // Ajoute un bouton ✏️ à chaque <main> <p>
    document.querySelectorAll("main p").forEach((p, index) => {
      const btn = document.createElement("button");
      btn.innerHTML = "✏️";
      btn.style.marginLeft = "10px";
      btn.style.background = "none";
      btn.style.border = "none";
      btn.style.cursor = "pointer";
      btn.title = "Modifier ce texte";
      btn.onclick = () => openEditPopup(p, index);
      p.insertAdjacentElement("afterend", btn);
    });
  }

  let editingElement = null;

  function openEditPopup(element, index) {
    editingElement = element;
    document.getElementById("editTextarea").value = element.textContent;
    document.getElementById("editPopup").classList.remove("hidden");
  }

  function closeEditPopup() {
    document.getElementById("editPopup").classList.add("hidden");
    editingElement = null;
  }

  async function saveEditedText() {
    if (!editingElement) return;

    const newText = document.getElementById("editTextarea").value.trim();
    editingElement.textContent = newText;
    closeEditPopup();

    // Récupère tous les <p> dans <main>
    const paragraphs = Array.from(document.querySelectorAll("main p")).map(p => p.textContent);
    const dataToSend = { content: paragraphs };

    try {
      const response = await fetch("/api/update-content", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(dataToSend)
      });

      if (response.ok) {
        alert("Contenu sauvegardé avec succès.");
      } else {
      const errorText = await response.text();
        alert("Erreur serveur : " + errorText);
      }

    } catch (error) {
      alert("Erreur réseau lors de la sauvegarde.");
      console.error(error);
    }
  }
</script>




  <!-- Script popup connexion/inscription -->
  <script>
    const loginPopup = document.getElementById("loginPopup");
const registerPopup = document.getElementById("registerPopup");

function toggleLoginPopup() {
  loginPopup.classList.toggle("hidden");
}

function toggleRegisterPopup() {
  registerPopup.classList.toggle("hidden");
}

// Gestion formulaire login
document.getElementById("loginForm").addEventListener("submit", function (e) {
  e.preventDefault();

  const email = document.getElementById("loginUsername").value.trim();
  const password = document.getElementById("loginPassword").value.trim();

  const comptes = JSON.parse(localStorage.getItem("accounts")) || {};

  if (comptes[email] && comptes[email].password === password) {
    localStorage.setItem("connectedUser", JSON.stringify({ email }));

    // Faire disparaître la popup après 0.5s puis reload
    setTimeout(() => {
      toggleLoginPopup();
      location.reload();
    }, 500);

  } else {
    document.getElementById("loginMessage").textContent = "Email ou mot de passe incorrect.";
  }
});


// Gestion formulaire inscription
document.getElementById("registerForm").addEventListener("submit", function (e) {
  e.preventDefault();

  const email = document.getElementById("registerUsername").value.trim();
  const password = document.getElementById("registerPassword").value.trim();

  const comptes = JSON.parse(localStorage.getItem("accounts")) || {};

  const messageElem = document.getElementById("registerMessage");

  if (comptes[email]) {
    messageElem.textContent = "Cet email est déjà utilisé.";
    messageElem.style.color = "red";
    return;
  }

  comptes[email] = { password };
  localStorage.setItem("accounts", JSON.stringify(comptes));
  localStorage.setItem("connectedUser", JSON.stringify({ email }));

  messageElem.textContent = "Compte créé avec succès.";
  messageElem.style.color = "green";

  // Faire disparaître la popup après 0.5s puis reload
  setTimeout(() => {
    toggleRegisterPopup();
    location.reload();
  }, 500);
});
  </script>

<!--  -------------------------------------------------->


<script>
function enregistrerUtilisateur() {
  const email = document.getElementById("registerUsername").value.trim();
  const password = document.getElementById("registerPassword").value.trim();
  const messageElem = document.getElementById("registerMessage");

  if (!email || !password) {
    messageElem.textContent = "Veuillez remplir tous les champs.";
    messageElem.style.color = "red";
    return;
  }

  fetch("http://localhost:3000/api/users", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, password })
  })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        messageElem.textContent = "✅ Compte créé avec succès.";
        messageElem.style.color = "green";

        // Tu peux stocker le nom pour l’utiliser plus tard
        localStorage.setItem("userName", email);
      } else if (data.error) {
        messageElem.textContent = "❌ " + data.error;
        messageElem.style.color = "red";
      }
    })
    .catch(error => {
      console.error("Erreur serveur :", error);
      messageElem.textContent = "❌ Erreur de communication avec le serveur.";
      messageElem.style.color = "red";
    });
}

// Lier au formulaire d’inscription
document.getElementById("registerForm").addEventListener("submit", function (e) {
  e.preventDefault();
  enregistrerUtilisateur();
});

</script>
<script>
  // Fermer la popup en cliquant à l'extérieur
  window.addEventListener("click", function (event) {
    if (event.target === loginPopup) {
      loginPopup.classList.add("hidden");
      document.getElementById("loginForm").reset();
      document.getElementById("loginMessage").textContent = "";
    }
  });


  // Fermer la popup d'inscription en cliquant à l'extérieur
  window.addEventListener("click", function (event) {
    if (event.target === registerPopup) {
      registerPopup.classList.add("hidden");
      document.getElementById("registerForm").reset();
      document.getElementById("registerMessage").textContent = "";
    }
  });
</script>


</body>
</html>
