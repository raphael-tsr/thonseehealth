<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thonsee Health - Accueil</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="compte.js"></script>
  <script defer src="panier.js"></script>
  <script defer src="utilisateur.js"></script>
  <script defer src="commandes.js"></script>
</head>

<body>

<header class="tete">
  <!-- IcÃ´ne utilisateur -->
  <div class="user" onclick="toggleAccountsPopup()" style="cursor:pointer;">
    <a class="text-decoration" href="parametre.html">
      <div id="userIcon">ğŸ‘¤</div>
    </a>
  </div>

  <div class="logo">Thonsee <span>Health</span></div>

  <!-- Bouton menu burger pour mobile -->
  <div class="menu-toggle" onclick="toggleMobileMenu()">â˜°</div>

  <!-- Menu principal -->
  <nav class="menu" id="mainMenu">
    <a href="index.html">Accueil</a>
    <a href="produits.html">Nos Produits</a>
    <a href="contact.html">Contact</a>
    <a href="panier.html">Panier <span id="cartCountNav">0</span></a>
    <a href="#" onclick="toggleLoginPopup(); return false;">Se connecter</a>
    <a href="#" onclick="toggleRegisterPopup(); return false;">S'inscrire</a>

    <!-- Lien vers la page Admin Commande -->
    <a href="admin_commande.html" id="adminLink" style="display: none; color: gold;">Admin Commande</a>

    <!-- Lien vers la page Admin Utilisateurs -->
    <a href="admin_users.html" id="adminUsersLink" style="display: none; color: gold;">Admin Utilisateurs</a>
  </nav>
</header>


  <main>
    <!-- Section Accueil -->
    <section id="accueil" class="slogan">
      <h1 class="titre">Ã‰levez votre bien-Ãªtre au rang du luxe.</h1>
      <p class="slogan1">ComplÃ©ments alimentaires premium â€“ Naturels, efficaces, Ã©lÃ©gants.</p>
    </section>

    <!-- Section Blog -->
    <section id="blog" class="section">
      <h2>Blog SantÃ© & Bien-Ãªtre</h2>
      <p>
        Bienvenue sur notre blog dÃ©diÃ© au bien-Ãªtre et Ã  la santÃ© naturelle. Ici, nous partageons des conseils approfondis,
        des recettes naturelles et des astuces pour amÃ©liorer votre qualitÃ© de vie au quotidien. Chaque article est
        rÃ©digÃ© avec soin pour vous accompagner dans votre quÃªte dâ€™Ã©quilibre et de vitalitÃ©.
      </p>
      <p>
        Lâ€™importance dâ€™une alimentation saine, les vertus des plantes mÃ©dicinales, ou encore les derniÃ¨res recherches en
        nutrition sont autant de sujets que nous abordons rÃ©guliÃ¨rement. Nous croyons fermement que la santÃ© passe par
        une approche globale mÃªlant science et respect de la nature.
      </p>
      <p>
        Nâ€™hÃ©sitez pas Ã  parcourir nos articles pour dÃ©couvrir comment intÃ©grer facilement ces conseils dans votre routine,
        et vivre pleinement votre potentiel au naturel.
      </p>
      <p>
        En plus, nous mettons Ã  disposition des guides pratiques pour choisir les meilleurs complÃ©ments alimentaires,
        comprendre leurs effets, et Ã©viter les idÃ©es reÃ§ues. Votre bien-Ãªtre est notre prioritÃ©, et notre blog est lÃ  pour
        vous Ã©clairer sur chaque Ã©tape de votre parcours.
      </p>
    </section>

    <!-- Section TÃ©moignages -->
    <section id="temoignages" class="section">
      <h2>TÃ©moignages</h2>
      <p>
        Â« Depuis que jâ€™utilise les complÃ©ments Thonsee Health, jâ€™ai ressenti un regain dâ€™Ã©nergie incroyable. Leur qualitÃ© est
        irrÃ©prochable et le service client est toujours Ã  lâ€™Ã©coute. Â» â€“ Marie L.
      </p>
      <p>
        Â« Des produits dâ€™une puretÃ© exceptionnelle, alliant efficacitÃ© et plaisir dâ€™utilisation. Je recommande vivement Ã 
        tous ceux qui veulent prendre soin dâ€™eux naturellement. Â» â€“ Julien P.
      </p>
      <p>
        Â« Ce que jâ€™apprÃ©cie le plus, câ€™est la transparence de la marque. On sait exactement ce quâ€™on ingÃ¨re, et Ã§a fait
        toute la diffÃ©rence dans ma confiance et ma fidÃ©litÃ©. Â» â€“ Sophie M.
      </p>
      <p>
        Â« GrÃ¢ce Ã  Thonsee Health, jâ€™ai rÃ©ussi Ã  amÃ©liorer ma digestion et mon sommeil sans effets secondaires. Une vraie
        rÃ©vÃ©lation ! Â» â€“ Ahmed K.
      </p>
    </section>

    <!-- Section Science -->
    <section id="science" class="section">
      <h2>La Science derriÃ¨re Thonsee Health</h2>
      <p>
        Chez Thonsee Health, la recherche scientifique est au cÅ“ur de nos dÃ©veloppements. Chaque ingrÃ©dient est sÃ©lectionnÃ©
        selon des critÃ¨res rigoureux basÃ©s sur des Ã©tudes cliniques et des preuves scientifiques solides.
      </p>
      <p>
        Notre Ã©quipe collabore avec des experts en nutrition, biologie et pharmacologie pour formuler des complÃ©ments
        qui optimisent votre santÃ© sans compromis. Nous testons Ã©galement la biodisponibilitÃ© de chaque substance afin
        d'assurer une absorption maximale.
      </p>
      <p>
        La transparence est primordiale : toutes nos formules sont documentÃ©es et soumises Ã  des contrÃ´les qualitÃ©
        stricts. Nous Ã©vitons les additifs superflus, privilÃ©gions les sources naturelles et traÃ§ons chaque lot de
        production.
      </p>
      <p>
        Cette approche scientifique et responsable garantit des produits haut de gamme, efficaces et sÃ»rs, qui rÃ©pondent
        aux attentes des consommateurs exigeants et soucieux de leur santÃ©.
      </p>
    </section>

    <!-- Section Ã€ propos -->
    <section id="apropos" class="section">
      <h2>Ã€ propos de Thonsee Health</h2>
      <p>
        Thonsee Health est nÃ©e dâ€™une passion commune pour la santÃ© naturelle et le luxe discret. Notre mission est de
        proposer des complÃ©ments alimentaires dâ€™exception, qui allient puretÃ©, efficacitÃ© et esthÃ©tique.
      </p>
      <p>
        FondÃ©e par une Ã©quipe de spÃ©cialistes engagÃ©s, la marque sâ€™appuie sur des valeurs fortes : respect de lâ€™environnement,
        transparence totale, et quÃªte dâ€™innovation. Chaque produit est le fruit dâ€™un travail rigoureux pour vous offrir
        une expÃ©rience unique.
      </p>
      <p>
        Nous croyons en une approche holistique du bien-Ãªtre, oÃ¹ science et nature cohabitent harmonieusement pour
        rÃ©vÃ©ler le meilleur de vous-mÃªme. Rejoignez-nous dans cette aventure vers une santÃ© plus belle, plus saine,
        plus luxueuse.
      </p>
      <p>
        Merci de faire confiance Ã  Thonsee Health.
      </p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Thonsee Health. Tous droits rÃ©servÃ©s.</p>
  </footer>

  <!-- Popup d'Ã©dition (ADMIN) -->
  <div id="editPopup" class="popup hidden">
    <div class="popup-content">
      <h2>Modifier le contenu</h2>
      <textarea id="editTextarea" rows="6" style="width: 100%;"></textarea>
      <button onclick="saveEditedText()">Enregistrer</button>
      <button onclick="closeEditPopup()">Annuler</button>
    </div>
  </div>

  <!-- POPUP CONNEXION -->
  <div id="loginPopup" class="popup hidden">
    <form id="loginForm" class="popup-content">
      <h2>Connexion</h2>
      <input type="email" id="loginUsername" placeholder="Email" required />
      <input type="password" id="loginPassword" placeholder="Mot de passe" required />
      <p id="loginMessage" class="message"></p>
      <button type="submit">Se connecter</button>
      <button type="button" onclick="toggleLoginPopup()">Fermer</button>
    </form>
  </div>

  <!-- POPUP INSCRIPTION -->
  <div id="registerPopup" class="popup hidden">
    <form id="registerForm" class="popup-content">
      <h2>Inscription</h2>
      <input type="email" id="registerUsername" placeholder="Email" required />
      <input type="password" id="registerPassword" placeholder="Mot de passe" required />
      <p id="registerMessage" class="message"></p>
      <button type="submit">Sâ€™inscrire</button>
      <button type="button" onclick="toggleRegisterPopup()">Fermer</button>
    </form>
  </div>


<!-- Script gestion Ã©dition du contenu (admin only) -->
<script>
  const adminEmail = "athonseehealth@gmail.com";
  const currentUser = JSON.parse(localStorage.getItem("connectedUser"));
  const admins = [adminEmail];
  const isAdmin = currentUser && admins.includes(currentUser.email);

  if (isAdmin) {
    // Affiche les liens admin
    document.getElementById("adminLink").style.display = "inline-block";
    document.getElementById("adminUsersLink").style.display = "inline-block";

    // Ajoute un bouton âœï¸ Ã  chaque <main> <p>
    document.querySelectorAll("main p").forEach((p, index) => {
      const btn = document.createElement("button");
      btn.innerHTML = "âœï¸";
      btn.style.marginLeft = "10px";
      btn.style.background = "none";
      btn.style.border = "none";
      btn.style.cursor = "pointer";
      btn.title = "Modifier ce texte";
      btn.onclick = () => openEditPopup(p, index);
      p.insertAdjacentElement("afterend", btn);
    });
  }

  let editingElement = null;

  function openEditPopup(element, index) {
    editingElement = element;
    document.getElementById("editTextarea").value = element.textContent;
    document.getElementById("editPopup").classList.remove("hidden");
  }

  function closeEditPopup() {
    document.getElementById("editPopup").classList.add("hidden");
    editingElement = null;
  }

  async function saveEditedText() {
    if (!editingElement) return;

    const newText = document.getElementById("editTextarea").value.trim();
    editingElement.textContent = newText;
    closeEditPopup();

    // RÃ©cupÃ¨re tous les <p> dans <main>
    const paragraphs = Array.from(document.querySelectorAll("main p")).map(p => p.textContent);
    const dataToSend = { content: paragraphs };

    try {
      const response = await fetch("/api/update-content", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(dataToSend)
      });

      if (response.ok) {
        alert("Contenu sauvegardÃ© avec succÃ¨s.");
      } else {
      const errorText = await response.text();
        alert("Erreur serveur : " + errorText);
      }

    } catch (error) {
      alert("Erreur rÃ©seau lors de la sauvegarde.");
      console.error(error);
    }
  }
</script>




  <!-- Script popup connexion/inscription -->
  <script>
    const loginPopup = document.getElementById("loginPopup");
const registerPopup = document.getElementById("registerPopup");

function toggleLoginPopup() {
  loginPopup.classList.toggle("hidden");
}

function toggleRegisterPopup() {
  registerPopup.classList.toggle("hidden");
}

// Gestion formulaire login
document.getElementById("loginForm").addEventListener("submit", function (e) {
  e.preventDefault();

  const email = document.getElementById("loginUsername").value.trim();
  const password = document.getElementById("loginPassword").value.trim();

  const comptes = JSON.parse(localStorage.getItem("accounts")) || {};

  if (comptes[email] && comptes[email].password === password) {
    localStorage.setItem("connectedUser", JSON.stringify({ email }));

    // Faire disparaÃ®tre la popup aprÃ¨s 0.5s puis reload
    setTimeout(() => {
      toggleLoginPopup();
      location.reload();
    }, 500);

  } else {
    document.getElementById("loginMessage").textContent = "Email ou mot de passe incorrect.";
  }
});


// Gestion formulaire inscription
document.getElementById("registerForm").addEventListener("submit", function (e) {
  e.preventDefault();

  const email = document.getElementById("registerUsername").value.trim();
  const password = document.getElementById("registerPassword").value.trim();

  const comptes = JSON.parse(localStorage.getItem("accounts")) || {};

  const messageElem = document.getElementById("registerMessage");

  if (comptes[email]) {
    messageElem.textContent = "Cet email est dÃ©jÃ  utilisÃ©.";
    messageElem.style.color = "red";
    return;
  }

  comptes[email] = { password };
  localStorage.setItem("accounts", JSON.stringify(comptes));
  localStorage.setItem("connectedUser", JSON.stringify({ email }));

  messageElem.textContent = "Compte crÃ©Ã© avec succÃ¨s.";
  messageElem.style.color = "green";

  // Faire disparaÃ®tre la popup aprÃ¨s 0.5s puis reload
  setTimeout(() => {
    toggleRegisterPopup();
    location.reload();
  }, 500);
});
  </script>

<!--  -------------------------------------------------->


<script>
function enregistrerUtilisateur() {
  const email = document.getElementById("registerUsername").value.trim();
  const password = document.getElementById("registerPassword").value.trim();
  const messageElem = document.getElementById("registerMessage");

  if (!email || !password) {
    messageElem.textContent = "Veuillez remplir tous les champs.";
    messageElem.style.color = "red";
    return;
  }

  fetch("http://localhost:3000/api/users", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, password })
  })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        messageElem.textContent = "âœ… Compte crÃ©Ã© avec succÃ¨s.";
        messageElem.style.color = "green";

        // Tu peux stocker le nom pour lâ€™utiliser plus tard
        localStorage.setItem("userName", email);
      } else if (data.error) {
        messageElem.textContent = "âŒ " + data.error;
        messageElem.style.color = "red";
      }
    })
    .catch(error => {
      console.error("Erreur serveur :", error);
      messageElem.textContent = "âŒ Erreur de communication avec le serveur.";
      messageElem.style.color = "red";
    });
}

// Lier au formulaire dâ€™inscription
document.getElementById("registerForm").addEventListener("submit", function (e) {
  e.preventDefault();
  enregistrerUtilisateur();
});

</script>
<script>
  // Fermer la popup en cliquant Ã  l'extÃ©rieur
  window.addEventListener("click", function (event) {
    if (event.target === loginPopup) {
      loginPopup.classList.add("hidden");
      document.getElementById("loginForm").reset();
      document.getElementById("loginMessage").textContent = "";
    }
  });


  // Fermer la popup d'inscription en cliquant Ã  l'extÃ©rieur
  window.addEventListener("click", function (event) {
    if (event.target === registerPopup) {
      registerPopup.classList.add("hidden");
      document.getElementById("registerForm").reset();
      document.getElementById("registerMessage").textContent = "";
    }
  });
</script>


</body>
</html>
